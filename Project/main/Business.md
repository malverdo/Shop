# Бизнес требования к сущности

## Карта

1. Каждый клиент получает карту при покупке
2. Карта даёт скидку на любые товары
3. Существуют, проценты скидок у карты и у акций, если применяется оба то, выбирается наибольший процент
4. Скидка карты определяется от покупок
    1. 5% -> совершить покупок на 1 рубль
    2. 10% -> совершить покупок на 10 тысяч рублей
    3. 15% -> совершить покупок на 50 тысяч рублей
    4. 20% -> совершить покупок на 100 тысяч рублей

## Вещь

1. Вещь - это любое изделие (рубашка, обувь, шляпа и т.д)
2. Вещь принадлежит категории
3. Вещь уникальна по своему article
4. status
    1. доступен (1)
    2. резерв (2)
    3. заказан (3)
    4. кончился (4)
5. Все характеристики вещи хранятся в поле JSON characteristics
   `{size_rus: 48, length_sleeve: 20}`
6. Исходя из region показываются вещи пользователю (по умолчанию Москва)
7. Каждая вещь может находиться под акцией не привязываясь ко всем регионам, а только к конкретным регионам.
8. На каждой вещи можно оставить отзыв.
    1. отзыв оставить может только зарегистрированный пользователь
    2. отзывы видят любые пользователи сайта
9. Вещи обновляются исходя из коллекции (Лето,Осень)
    1. Каждая вещь уникальна , в среднем в каждом регионе может находиться до 50 тысяч вещей,
    2. В общем вещей около 1 миллиона
    3. Старые вещи которые вышли из коллекции (на 2 сезона) переводятся в block потом удаляются.
    4. В дальнейшем если будут зависания можно применить шардинг по регионам

## Action
1. Акции не могут изменяться , только добавляться новые
2. Акции могут быть 2 вида
    1. Проценты (action_percent)
        1. Параметр sale определяет находиться ли в распродаже (нужно для вывода в отдельную страницу)
        2. Существуют, проценты скидок у карты и у акций, если применяется оба то, выбирается наибольший процент
        3. Проценты можно применять с статические рубли
        4. Эти акции как отдельная страница
    2. Статические рубли (action_amount)
        1. Промокод на определённую сумму (500,1000 рублей и т.д)
        2. подарочный сертификат на определённую сумму (500,1000 рублей и т.д)

##  fashion

1. Образ, образ существует в контексте many to many, одна вещь может входить в много образов , и в образ может входить много вещей
2. Образ как отдельная страница
3. Образ есть категории (fashion_category/Деловой, Спортивный, Крутой)

## Customer

1. Есть личный кабинет в котором можно просмотреть
    1. историю заказов (история order)
    2. клубная карта (номер,сумма покупок)
    3. Избранное  (chosen)
    4. Мои адреса (поле address JSON)
    5. Мои отзывы
    6. Настройки оповещений
2. Customer может иметь клубную карту.
3. Может зарезервировать вещь
4. Может, отменять заказ
5. Customer не имеет пароля, так как регистрацию идёт через Oauth2.0

## order

1. заказ может входить в статусы
    1. доставляется в магазин. (1)
    2. доставляется по адресу клиента. (2)
    3. ждёт оплаты (3)
    4. отменён (4)
2. при status(2)(доставляется по адресу клиента, должна существовать ассоциация с delivery
3.  в расчёт скидок берётся 3 вида
    1. процент по клубной карте
    2. промокод
    3. процент по акции

## purchase
1. создаётся только  том случае если заказ оплачен

## reserve
1. клиент может зарезервировать вещь, от 1 до 7 дней (по умолчанию 3 дня)

## reviews
1. На каждой вещи можно оставить отзыв.
    1. отзыв оставить может только зарегистрированный пользователь
    2. отзывы видят любые пользователи сайта 
